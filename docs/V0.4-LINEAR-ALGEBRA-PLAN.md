# Achronyme v0.4.0 - Advanced Linear Algebra Implementation Plan

## üéØ Objetivo

Implementar funciones avanzadas de √°lgebra lineal que hagan de Achronyme una soluci√≥n competitiva contra NumPy/MATLAB en el ecosistema JavaScript.

## üì¶ Features de v0.4.0

### 1. Matrix Decompositions

#### LU Decomposition (PA = LU)
**Uso**: Resolver sistemas de ecuaciones lineales eficientemente

```typescript
const A = ach.matrix([[4, 3], [6, 3]]);
const { L, U, P } = ach.lu(A);
// P √ó A = L √ó U
```

**Algoritmo**: Gaussian elimination with partial pivoting
**Complejidad**: O(n¬≥)

#### QR Decomposition (A = QR)
**Uso**: Least squares, eigenvalue algorithms

```typescript
const A = ach.matrix([[12, -51, 4], [6, 167, -68], [-4, 24, -41]]);
const { Q, R } = ach.qr(A);
// A = Q √ó R
// Q es ortogonal (Q^T √ó Q = I)
// R es triangular superior
```

**Algoritmos posibles**:
- Gram-Schmidt (m√°s simple, menos estable)
- Householder reflections (m√°s estable, preferido)
- Givens rotations (para matrices sparse)

**Complejidad**: O(mn¬≤) para matriz m√ón

#### Singular Value Decomposition (A = UŒ£V^T)
**Uso**: PCA, compresi√≥n de datos, pseudo-inverse

```typescript
const A = ach.matrix([[1, 2], [3, 4], [5, 6]]);
const { U, S, V } = ach.svd(A);
// A = U √ó Œ£ √ó V^T
// U: left singular vectors
// S: singular values (diagonal)
// V: right singular vectors
```

**Algoritmo**: Golub-Reinsch con bidiagonalization
**Complejidad**: O(min(m,n)¬≤max(m,n))

#### Cholesky Decomposition (A = L√óL^T)
**Uso**: Matrices positivas definidas, optimizaci√≥n

```typescript
const A = ach.matrix([[4, 12, -16], [12, 37, -43], [-16, -43, 98]]);
const L = ach.cholesky(A);
// A = L √ó L^T
// Solo para matrices sim√©tricas positivas definidas
```

**Algoritmo**: Cholesky-Banachiewicz
**Complejidad**: O(n¬≥/3) - M√°s r√°pido que LU

### 2. Eigenvalue Problems

#### Eigenvalues and Eigenvectors
**Uso**: An√°lisis de estabilidad, PCA, f√≠sica cu√°ntica

```typescript
const A = ach.matrix([[4, -2], [1, 1]]);
const { values, vectors } = ach.eig(A);
// A √ó v = Œª √ó v
// values: eigenvalues [Œª1, Œª2, ...]
// vectors: eigenvectors como columnas
```

**Algoritmos**:
- Power iteration (eigenvalue dominante)
- QR algorithm (todos los eigenvalues)
- Jacobi method (matrices sim√©tricas)

**Complejidad**: O(n¬≥) iterativo

### 3. Matrix Norms and Conditions

```typescript
// Matrix norms
const norm1 = ach.norm(A, 1);        // Maximum column sum
const normInf = ach.norm(A, 'inf');  // Maximum row sum
const normF = ach.norm(A, 'fro');    // Frobenius norm

// Condition number
const cond = ach.cond(A);  // Œ∫(A) = ||A|| √ó ||A^-1||
```

### 4. Linear System Solvers

```typescript
// Solve Ax = b
const A = ach.matrix([[3, 2], [1, 2]]);
const b = ach.vector([7, 5]);

// Method 1: Direct solve (usa LU internamente)
const x = ach.solve(A, b);

// Method 2: Least squares (para sistemas sobre-determinados)
const x_ls = ach.lstsq(A, b);

// Method 3: Iterative solvers (para matrices grandes sparse)
const x_iter = ach.solveIterative(A, b, { method: 'conjugate-gradient' });
```

## üèóÔ∏è Arquitectura de Implementaci√≥n

### Estructura de Archivos

```
wasm/src/
‚îú‚îÄ‚îÄ linalg/
‚îÇ   ‚îú‚îÄ‚îÄ decompositions.hpp      # Interfaces de descomposiciones
‚îÇ   ‚îú‚îÄ‚îÄ decompositions.cpp      # LU, QR, SVD, Cholesky
‚îÇ   ‚îú‚îÄ‚îÄ eigensolvers.hpp        # Eigenvalue algorithms
‚îÇ   ‚îú‚îÄ‚îÄ eigensolvers.cpp        # Power, QR algorithm, Jacobi
‚îÇ   ‚îú‚îÄ‚îÄ linear_solvers.hpp      # System solvers
‚îÇ   ‚îú‚îÄ‚îÄ linear_solvers.cpp      # solve, lstsq
‚îÇ   ‚îî‚îÄ‚îÄ matrix_utils.hpp        # Norms, conditions, etc.
‚îÇ
‚îú‚îÄ‚îÄ bindings/
‚îÇ   ‚îî‚îÄ‚îÄ linalg_bindings.cpp     # WASM bindings

src/sdk/
‚îî‚îÄ‚îÄ linalg.ts                    # TypeScript API
```

### Tipos de Retorno

```typescript
interface LUResult {
  L: AchronymeValue;  // Lower triangular
  U: AchronymeValue;  // Upper triangular
  P: AchronymeValue;  // Permutation matrix
  handle?: Handle;    // Para pipeline
}

interface QRResult {
  Q: AchronymeValue;  // Orthogonal
  R: AchronymeValue;  // Upper triangular
  handle?: Handle;
}

interface SVDResult {
  U: AchronymeValue;  // Left singular vectors
  S: AchronymeValue;  // Singular values (vector)
  V: AchronymeValue;  // Right singular vectors
  handle?: Handle;
}

interface EigenResult {
  values: AchronymeValue;   // Complex vector
  vectors: AchronymeValue;  // Matrix de eigenvectors
  handle?: Handle;
}
```

## üé® API Design

### Opci√≥n 1: M√©todos en Matrix

```typescript
const A = ach.matrix([[1, 2], [3, 4]]);

// Decompositions como m√©todos
const { L, U, P } = A.lu();
const { Q, R } = A.qr();
const { values, vectors } = A.eig();

// Solvers como m√©todos
const x = A.solve(b);
```

### Opci√≥n 2: Funciones Globales (Preferido - consistente con NumPy)

```typescript
const A = ach.matrix([[1, 2], [3, 4]]);

// Funciones globales
const { L, U, P } = ach.lu(A);
const { Q, R } = ach.qr(A);
const { values, vectors } = ach.eig(A);

// Solvers
const x = ach.solve(A, b);
```

**Raz√≥n**: M√°s consistente con NumPy/MATLAB y permite mejor control del namespace

## üìä Performance Targets

| Operaci√≥n | Tama√±o | Target | Competidor |
|-----------|--------|--------|------------|
| LU decomp | 100√ó100 | <5ms | math.js: N/A |
| QR decomp | 100√ó100 | <10ms | numeric.js: ~50ms |
| SVD | 100√ó100 | <50ms | numeric.js: ~200ms |
| Eigenvalues | 100√ó100 | <100ms | numeric.js: ~500ms |
| Solve Ax=b | 100√ó100 | <3ms | math.js: ~20ms |

## üß™ Testing Strategy

### Unit Tests
```typescript
describe('LU Decomposition', () => {
  it('should decompose simple 2x2 matrix', () => {
    const A = ach.matrix([[4, 3], [6, 3]]);
    const { L, U, P } = ach.lu(A);

    // Verify PA = LU
    const PA = ach.mmul(P, A);
    const LU = ach.mmul(L, U);
    expect(PA).toBeCloseTo(LU);
  });

  it('should handle singular matrices', () => {
    const A = ach.matrix([[1, 1], [2, 2]]);
    expect(() => ach.lu(A)).toThrow();
  });
});
```

### Numerical Accuracy Tests
- Comparar con resultados conocidos de MATLAB/NumPy
- Verificar propiedades matem√°ticas (ej: Q^T √ó Q = I para QR)
- Testear edge cases (matrices singulares, mal condicionadas)

### Performance Tests
```typescript
bench('LU decomposition 100√ó100', () => {
  const A = randomMatrix(100, 100);
  ach.lu(A);
});
```

## üöÄ Implementation Roadmap

### Phase 1: Foundation (Week 1)
- [ ] Crear estructura de archivos
- [ ] Implementar matrix utilities (transpose, norms)
- [ ] Setup testing framework
- [ ] LU decomposition b√°sico (sin pivoting)

### Phase 2: Core Decompositions (Week 2)
- [ ] LU con partial pivoting
- [ ] QR con Householder reflections
- [ ] Cholesky decomposition
- [ ] Tests de accuracy

### Phase 3: Advanced (Week 3)
- [ ] SVD (Golub-Reinsch)
- [ ] Eigenvalues (QR algorithm)
- [ ] Performance optimization

### Phase 4: Solvers (Week 4)
- [ ] Linear system solvers
- [ ] Least squares
- [ ] Condition number
- [ ] Documentation completa

## üìö Referencias

### Algoritmos
- **Golub & Van Loan**: "Matrix Computations" (4th ed) - La biblia
- **Trefethen & Bau**: "Numerical Linear Algebra" - M√°s te√≥rico
- **Press et al**: "Numerical Recipes" - Implementaciones pr√°cticas

### Librer√≠as de Referencia
- **Eigen** (C++): Para verificar implementaciones
- **NumPy**: Para API design
- **LAPACK**: Algoritmos est√°ndar (reference)

## ‚ö†Ô∏è Consideraciones

### Numerical Stability
- Usar pivoting en LU
- Preferir Householder sobre Gram-Schmidt
- Verificar condition numbers antes de invertir

### Memory Management
- Decomposiciones retornan m√∫ltiples matrices
- Sistema de handles debe gestionar todos los resultados
- Considerar operaciones in-place para matrices grandes

### Error Handling
```typescript
class SingularMatrixError extends Error {}
class IllConditionedError extends Error {}
class NonSquareMatrixError extends Error {}
```

## üéØ Success Criteria para v0.4.0

- [ ] 4+ descomposiciones implementadas (LU, QR, SVD, Cholesky)
- [ ] Eigenvalue solver funcional
- [ ] Linear system solver con LU
- [ ] Tests de accuracy al 1e-12
- [ ] Performance 2-10x mejor que numeric.js
- [ ] Documentaci√≥n completa con ejemplos
- [ ] Demo interactivo en el website

---

**Versi√≥n**: 0.4.0-alpha
**Target Release**: [Define fecha]
**Maintainer**: @eddndev
