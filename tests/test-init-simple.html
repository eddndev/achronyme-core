<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple WASM Init Test</title>
</head>
<body>
    <h1>Simple WASM Initialization Test</h1>
    <div id="output"></div>

    <script type="module">
        const output = document.getElementById('output');

        function log(msg, isError = false) {
            const p = document.createElement('p');
            p.textContent = msg;
            p.style.color = isError ? 'red' : 'green';
            output.appendChild(p);
        }

        try {
            log('1. Importing Achronyme SDK...');
            const { Achronyme } = await import('../src/sdk/index.ts');
            log('2. ✅ Import successful');

            log('3. Creating Achronyme instance...');
            const ach = new Achronyme();
            log('4. ✅ Instance created');

            log('5. Initializing WASM...');
            await ach.init();
            log('6. ✅ WASM initialized');

            log('7. Checking methods exist...');
            log(`   - ach.vector exists: ${typeof ach.vector === 'function'}`);
            log(`   - ach.linspace exists: ${typeof ach.linspace === 'function'}`);
            log(`   - ach.sin exists: ${typeof ach.sin === 'function'}`);

            if (typeof ach.vector !== 'function') {
                throw new Error('ach.vector is not a function!');
            }

            log('8. Testing simple vector creation...');
            const v = ach.vector([1, 2, 3, 4, 5]);
            log(`9. ✅ Vector created, length: ${v.length}`);

            log('10. Testing linspace...');
            const lin = ach.linspace(0, 1, 10);
            log(`11. ✅ Linspace created, length: ${lin.length}`);

            log('\n✅ ALL TESTS PASSED!');

        } catch (error) {
            log(`❌ ERROR: ${error.message}`, true);
            log(`Stack: ${error.stack}`, true);
            console.error('Full error:', error);
        }
    </script>
</body>
</html>
