// Comprehensive IIFE tests

// Test 1: Basic IIFE
let t1 = (x => x * 2)(21)  // Expected: 42

// Test 2: IIFE with no params
let t2 = (() => 100)()  // Expected: 100

// Test 3: Multi-param IIFE
let t3 = ((a, b, c) => a + b * c)(2, 3, 4)  // Expected: 14

// Test 4: Nested IIFE
let t4 = ((x => x + 1)((y => y * 2)(5)))  // Expected: 11

// Test 5: IIFE with rec (recursive)
let t5 = (n => if(n <= 0, 1, n * rec(n - 1)))(5)  // Expected: 120

// Test 6: IIFE in record with self
let obj = {
    multiplier: 3,
    compute: x => (factor => x * factor * self.multiplier)(2)
}
let t6 = obj.compute(5)  // Expected: 30

// Test 7: Your original example
let calculator = {
    value: 6,
    getFac: () => (n => if(n <= 1, 1, n * rec(n - 1)))(self.value)
}
let t7 = calculator.getFac()  // Expected: 720

// Test 8: IIFE with closure capture
let base = 10
let t8 = ((offset => base + offset)(5))  // Expected: 15

// Test 9: IIFE returning IIFE (higher-order)
let t9 = ((x => y => x + y)(10))(5)  // Expected: 15

// Return all results
[t1, t2, t3, t4, t5, t6, t7, t8, t9]
// Expected: [42, 100, 14, 11, 120, 30, 720, 15, 15]
