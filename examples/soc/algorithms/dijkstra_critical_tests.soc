// Critical Dijkstra Tests - Manual Verification
// Each test is clearly labeled with expected results

// ===========================================
// TEST 1: Greedy Algorithm Trap
// ===========================================
// This tests that Dijkstra doesn't greedily
// pick the shortest first edge
let greedy_trap = network([
    S -> A: {weight: 1},
    S -> B: {weight: 4},
    A -> B: {weight: 2},
    A -> C: {weight: 5},
    B -> C: {weight: 1}
])

dijkstra(greedy_trap, "S", "C")
// EXPECTED: path = [S, A, B, C], distance = 4
// Breakdown: S->A (1) + A->B (2) + B->C (1) = 4
// NOT: S->A->C = 6
// NOT: S->B->C = 5

// ===========================================
// TEST 2: Triangle Inequality
// ===========================================
let triangle = network([
    X -> Y: {weight: 10},
    X -> Z: {weight: 3},
    Z -> Y: {weight: 4}
])

dijkstra(triangle, "X", "Y")
// EXPECTED: path = [X, Z, Y], distance = 7
// NOT: X->Y = 10

// ===========================================
// TEST 3: Complex Multi-Path
// ===========================================
let complex = network([
    S -> A: {weight: 7},
    S -> B: {weight: 2},
    S -> C: {weight: 3},
    A -> D: {weight: 4},
    B -> A: {weight: 3},
    B -> D: {weight: 8},
    C -> B: {weight: 1},
    C -> E: {weight: 7},
    D -> E: {weight: 2},
    E -> T: {weight: 1}
])

dijkstra(complex, "S", "T")
// EXPECTED: path = [S, C, B, A, D, E, T], distance = 14
// Breakdown: 3 + 1 + 3 + 4 + 2 + 1 = 14

// ===========================================
// TEST 4: Undirected Symmetry
// ===========================================
let undirected = network([
    A <> B: {weight: 2},
    B <> C: {weight: 3},
    C <> D: {weight: 4}
])

let forward = dijkstra(undirected, "A", "D")
let backward = dijkstra(undirected, "D", "A")

forward
backward
// EXPECTED: Both should have distance = 9

// ===========================================
// TEST 5: Fractional Weights
// ===========================================
let fractional = network([
    A -> B: {weight: 0.5},
    B -> C: {weight: 0.7},
    C -> D: {weight: 0.3},
    A -> D: {weight: 2.0}
])

dijkstra(fractional, "A", "D")
// EXPECTED: path = [A, B, C, D], distance = 1.5
// NOT: A->D = 2.0

// ===========================================
// TEST 6: Dense Graph (All Pairs)
// ===========================================
let dense = network([
    N1 -> N2: {weight: 2},
    N1 -> N3: {weight: 4},
    N2 -> N3: {weight: 1},
    N2 -> N4: {weight: 7},
    N3 -> N4: {weight: 3},
    N1 -> N4: {weight: 15}
])

dijkstra(dense, "N1", "N4")
// EXPECTED: path = [N1, N2, N3, N4], distance = 6
// Breakdown: 2 + 1 + 3 = 6
// NOT direct: N1->N4 = 15
