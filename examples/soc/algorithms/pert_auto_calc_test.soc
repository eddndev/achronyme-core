// Test: Auto-calculation of prerequisites in PERT functions

let proyecto = network(
    [A -> B, A -> C, B -> D, C -> D],
    {
        A: {op: 2, mo: 3, pe: 5},
        B: {op: 4, mo: 6, pe: 10},
        C: {op: 3, mo: 4, pe: 6},
        D: {op: 1, mo: 2, pe: 3}
    }
)

// Test 1: backward_pass auto-calculates forward_pass
let con_backward = backward_pass(proyecto)
con_backward.nodes.A.ES  // Should have ES from auto-calculated forward_pass
con_backward.nodes.A.LS  // Should have LS from backward_pass

// Test 2: calculate_slack auto-calculates both passes
let con_slack = calculate_slack(proyecto)
con_slack.nodes.B.slack  // Should have slack calculated

// Test 3: critical_path auto-calculates everything
let ruta = critical_path(proyecto)
ruta  // Should return critical path nodes

// Test 4: project_variance auto-calculates critical path
let varianza = project_variance(proyecto)
varianza  // Should return variance

// Test 5: pert_analysis does everything in one call
let analisis_completo = pert_analysis(proyecto)
analisis_completo.duration
analisis_completo.variance
analisis_completo.std_dev
analisis_completo.critical_path

// Test 6: Verify that auto-calculated data is correct
let manual_forward = forward_pass(proyecto)
let manual_backward = backward_pass(manual_forward)
let manual_slack = calculate_slack(manual_backward)
let manual_critical = critical_path(manual_slack)

// Compare auto vs manual
let auto_critical = critical_path(proyecto)
auto_critical
manual_critical

// Both should be identical!
